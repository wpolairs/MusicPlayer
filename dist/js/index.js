!function(t,s){function i(t){this.wrap=t,this.url=" ../mock/data.json",this.now=0,this.datalist=[],this.rotateTimer=null}i.prototype={init:function(){this.getData(),this.getDom(),this.autonext()},getData:function(){This=this,t.ajax({url:"../mock/data.json",method:"get",success:function(t){This.datalist=t,This.listControl=s.listControl(This.datalist,This.wrap),This.loadMusic(This.now),This.change()},error:function(){console.log("请求失败")}})},getDom:function(){this.songimg=document.querySelector(".songimg img"),this.controlbtn=document.querySelectorAll(".control li"),this.evenBind(this.controlbtn)},loadMusic:function(i){This=this,s.music.load(this.datalist[i].audioSrc,function(t){s.render(This.datalist[i],t)}),this.listControl.changeSelect(i)},evenBind:function(t){This=this,t[0].addEventListener("touchend",function(){"true"===This.datalist[This.now].isLike?This.datalist[This.now].isLike="false":This.datalist[This.now].isLike="true",This.loadMusic(This.now)}),t[1].addEventListener("touchend",function(){This.repair(),This.now++,This.boundary(),This.loadMusic(This.now)}),t[2].addEventListener("touchend",function(){"pause"===s.music.status?(s.music.play(),This.deg=This.songimg.dataset.rotate||0,This.rotateImg(This.deg),this.className="playing"):(s.music.pause(),this.className="",This.stopRotate())}),t[3].addEventListener("touchend",function(){This.repair(),This.now--,This.boundary(),This.loadMusic(This.now)}),t[4].addEventListener("touchend",function(){This.listControl.sideup()})},rotateImg:function(t){This=this,clearInterval(this.rotateTimer),this.rotateTimer=setInterval(function(){t=+t+.2,This.songimg.style.transform="rotate("+t+"deg)",This.songimg.dataset.rotate=t},1e3/60)},stopRotate:function(){clearInterval(this.rotateTimer)},repair:function(){this.songimg.dataset.rotate=0,this.songimg.style.transform="rotate(0deg)"},boundary:function(){this.now>this.datalist.length-1?this.now=0:this.now<0&&(this.now=this.datalist.length-1)},autonext:function(){This=this,s.music.end(function(){This.now++,This.loadMusic(This.now)})},change:function(){This=this;let t=document.querySelectorAll("dd");t.forEach(function(t,i){t.addEventListener("touchend",function(){This.loadMusic(i)})})}};let n=new i(document.querySelector("#wrap"));n.init()}(window.Zepto,window.player);